<!--
~ Copyright 2019-present Open Networking Foundation
~
~ Licensed under the Apache License, Version 2.0 (the "License");
~ you may not use this file except in compliance with the License.
~ You may obtain a copy of the License at
~
~     http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS,
~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
~ See the License for the specific language governing permissions and
~ limitations under the License.
-->




<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Open Network Operating System (ONOS)">
      
      
      
        <meta name="author" content="Open Networking Foundation">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.2">
    
    
      
        <title>How To Debug Configuration Subsystem? - onosproject</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../styles/css/extra.css">
    
      <link rel="stylesheet" href="../../../theme/css/onos-menu.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#debug-onos-config-in-onit-using-delve" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="onosproject" class="md-header-nav__button md-logo">
          
            <img src="../../../images/onos_logo_2017.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              onosproject
            </span>
            <span class="md-header-nav__topic">
              How To Debug Configuration Subsystem?
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/onosproject" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    onosproject
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="onosproject" class="md-nav__button md-logo">
      
        <img src="../../../images/onos_logo_2017.png" width="48" height="48">
      
    </a>
    onosproject
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/onosproject" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    onosproject
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="ONOS" class="md-nav__link">
      ONOS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Developers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developers/community-info/" title="Contacts and Calenders" class="md-nav__link">
      Contacts and Calenders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developers/prerequisites/" title="Development Prerequisites" class="md-nav__link">
      Development Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developers/dev_workflow/" title="Developer Workflow" class="md-nav__link">
      Developer Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developers/contributing/" title="Contribution Guidelines" class="md-nav__link">
      Contribution Guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developers/godocs/" title="GoDoc Pages" class="md-nav__link">
      GoDoc Pages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../developers/deploy_with_helm/" title="Deploy with Helm" class="md-nav__link">
      Deploy with Helm
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Configuration Subsystem
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Configuration Subsystem
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="An Introduction to Configuration Susbsytem" class="md-nav__link">
      An Introduction to Configuration Susbsytem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build/" title="How To Build Configuration Subsystem?" class="md-nav__link">
      How To Build Configuration Subsystem?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../run/" title="How To Run Configuration Subsystem?" class="md-nav__link">
      How To Run Configuration Subsystem?
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        How To Debug Configuration Subsystem?
      </label>
    
    <a href="./" title="How To Debug Configuration Subsystem?" class="md-nav__link md-nav__link--active">
      How To Debug Configuration Subsystem?
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#debugging-example-1-use-goland-ide-recommended" title="Debugging Example #1: Use Goland IDE (Recommended):" class="md-nav__link">
    Debugging Example #1: Use Goland IDE (Recommended):
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-example-2-use-simple-delve-client" title="Debugging. Example #2: Use Simple Delve Client:" class="md-nav__link">
    Debugging. Example #2: Use Simple Delve Client:
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#print-local-variables" title="Print Local Variables" class="md-nav__link">
    Print Local Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#goroutines" title="Goroutines" class="md-nav__link">
    Goroutines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-your-code-line-by-line" title="Debug Your Code Line by Line" class="md-nav__link">
    Debug Your Code Line by Line
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print-stack-trace" title="Print Stack Trace" class="md-nav__link">
    Print Stack Trace
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployment/" title="How To Deploy with Helm" class="md-nav__link">
      How To Deploy with Helm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/" title="Administrative And Diagnostic CLI" class="md-nav__link">
      Administrative And Diagnostic CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modelplugin/" title="Extending Configuration Subsystem With Model Plugins" class="md-nav__link">
      Extending Configuration Subsystem With Model Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gnmi/" title="Northbound gNMI Service" class="md-nav__link">
      Northbound gNMI Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gnmi_extensions/" title="gNMI Extensions" class="md-nav__link">
      gNMI Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-10" type="checkbox" id="nav-3-10">
    
    <label class="md-nav__link" for="nav-3-10">
      APIs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-10">
        APIs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/admin/" title="Admin API" class="md-nav__link">
      Admin API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/diags/" title="Diagnostic API" class="md-nav__link">
      Diagnostic API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-10-3" type="checkbox" id="nav-3-10-3">
    
    <label class="md-nav__link" for="nav-3-10-3">
      Types
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-10-3">
        Types
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/types_change/" title="Common Change Types" class="md-nav__link">
      Common Change Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/types_change_device/" title="Device Change Types" class="md-nav__link">
      Device Change Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/types_change_network/" title="Network Change Types" class="md-nav__link">
      Network Change Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/types_snapshot/" title="Common Snapshot Types" class="md-nav__link">
      Common Snapshot Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/types_snapshot_device/" title="Device Snapshot Types" class="md-nav__link">
      Device Snapshot Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/types_snapshot_network/" title="Network Snapshot Types" class="md-nav__link">
      Network Snapshot Types
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Topology Subsystem
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Topology Subsystem
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-topo/docs/cli/" title="How To Use Topology Subsystem CLI?" class="md-nav__link">
      How To Use Topology Subsystem CLI?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-topo/docs/deployment/" title="How To Deploy with Helm" class="md-nav__link">
      How To Deploy with Helm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      APIs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        APIs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-topo/docs/api/admin/" title="Admin API" class="md-nav__link">
      Admin API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-topo/docs/api/diags/" title="Diagnostic API" class="md-nav__link">
      Diagnostic API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-topo/docs/api/device/" title="Device API" class="md-nav__link">
      Device API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Command Line Interface Subsystem (CLI)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Command Line Interface Subsystem (CLI)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-cli/docs/setup/" title="How To Install and Run CLI Subsystem?" class="md-nav__link">
      How To Install and Run CLI Subsystem?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-cli/docs/deployment/" title="How To Deploy with Helm" class="md-nav__link">
      How To Deploy with Helm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-cli/docs/cli/onos/" title="ONOS CLI Commands" class="md-nav__link">
      ONOS CLI Commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Zero-Touch Provisioning (ZTP) Subsystem
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Zero-Touch Provisioning (ZTP) Subsystem
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-ztp/docs/setup/" title="How To Install And Run ZTP?" class="md-nav__link">
      How To Install And Run ZTP?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      APIs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        APIs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-ztp/docs/api/admin/" title="Admin API" class="md-nav__link">
      Admin API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Test Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Test Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-test/docs/setup/" title="How To Install and Run ONIT?" class="md-nav__link">
      How To Install and Run ONIT?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-test/docs/run/" title="How To Use ONIT?" class="md-nav__link">
      How To Use ONIT?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-test/docs/testing/" title="How To Write and Run Tests?" class="md-nav__link">
      How To Write and Run Tests?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Graphical User Interface (GUI)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Graphical User Interface (GUI)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-gui/docs/" title="ONOS-GUI Subsystem" class="md-nav__link">
      ONOS-GUI Subsystem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-gui/docs/config-gui/" title="Configuration GUI" class="md-nav__link">
      Configuration GUI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-gui/docs/architecture/" title="GUI Architecture" class="md-nav__link">
      GUI Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-gui/docs/prerequisites/" title="GUI Development Prerequisites" class="md-nav__link">
      GUI Development Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../onos-gui/docs/run/" title="How To Run ONOS GUI?" class="md-nav__link">
      How To Run ONOS GUI?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#debugging-example-1-use-goland-ide-recommended" title="Debugging Example #1: Use Goland IDE (Recommended):" class="md-nav__link">
    Debugging Example #1: Use Goland IDE (Recommended):
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-example-2-use-simple-delve-client" title="Debugging. Example #2: Use Simple Delve Client:" class="md-nav__link">
    Debugging. Example #2: Use Simple Delve Client:
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#print-local-variables" title="Print Local Variables" class="md-nav__link">
    Print Local Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#goroutines" title="Goroutines" class="md-nav__link">
    Goroutines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-your-code-line-by-line" title="Debug Your Code Line by Line" class="md-nav__link">
    Debug Your Code Line by Line
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print-stack-trace" title="Print Stack Trace" class="md-nav__link">
    Print Stack Trace
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="debug-onos-config-in-onit-using-delve">Debug onos-config in Onit Using Delve</h1>
<h2 id="debugging-example-1-use-goland-ide-recommended">Debugging Example #1: Use Goland IDE (Recommended):</h2>
<ul>
<li>
<p>In this example, we assume you already started an onit cluster. If you haven't done that yet, refer to <a href="testing.md">testing</a> for more details.</p>
</li>
<li>
<p>First, you need to configure your <a href="https://www.jetbrains.com/go/">Goland</a> IDE to connect to the remote <a href="https://github.com/go-delve/delve/tree/master/Documentation/installation">Delve</a> debugger which is running in the onos-config 
pod. You can do that by going to <em>Run | Edit Configurationsâ€¦ | + | Go Remote</em> and configuring the host (in this example <em>localhost</em>) and port (in this example port <strong>40000</strong>) your remote debugger is listening on.</p>
</li>
</ul>
<p><img alt="goland_ide_configuration" src="../images/goland_ide_remote_debug.gif" /></p>
<ul>
<li>To start debugging and  open a debugger port to the given resource, you can run <code>onit debug</code> command. For example, to forwards a port to the debug port on the onos-config pod, run the following command:</li>
</ul>
<div class="codehilite"><pre><span></span>  &gt;onit debug &lt;name of onos-config pod&gt;
  Forwarding from <span class="m">127</span>.0.0.1:40000 -&gt; <span class="m">40000</span>
  Forwarding from <span class="o">[</span>::1<span class="o">]</span>:40000 -&gt; <span class="m">40000</span>
</pre></div>


<ul>
<li>To connect to the debugger using Goland IDE, select the configuration that you created 
in the first step and click on <em>Debug</em> button as follows:</li>
</ul>
<p><img alt="goland_ide_connect" src="../images/goland_debug_connect.gif" /></p>
<ul>
<li>If your Goland IDE connects to the debug server which is running in onos-config pod successfully, then you should be able to see the following message in the logs:</li>
</ul>
<div class="codehilite"><pre><span></span>   &gt; onit get logs &lt;name of onos-config pod&gt;
   ....
   <span class="m">2019</span>-07-22T15:09:27Z debug <span class="nv">layer</span><span class="o">=</span>debugger halting
   <span class="m">2019</span>-07-22T15:09:28Z debug <span class="nv">layer</span><span class="o">=</span>debugger continuing
</pre></div>


<ul>
<li>Suppose we want to add a simulator and debug <a href="https://github.com/onosproject/onos-config/blob/master/pkg/southbound/synchronizer/synchronizer.go">synchronizer</a>
code by setting a few breakpoints in different lines of its file as follows:</li>
</ul>
<p><img alt="goland_ide_set_breakpoints" src="../images/goland_debug_set_breakpoints.gif" /> </p>
<ul>
<li>
<p>As you can see above, after setting the breakpoints, you should be able to see some messages
in the onos-config pod logs that confirm you set the breakpoints. When we add a simulator
 the Goland IDE hits the first breakpoint that was set. At this point you can go through the list 
of variables and goroutines using the debugger dashboard. </p>
</li>
<li>
<p>Suppose we want to have tracepoints instead of breakpoints. Tracepoints don't 
cause the program execution to break and they can be useful when you need to inspect something, 
but not stop the program. To do that in Goland IDE, first set a breakpoint and then 
right-click on the breakpoint and unchecking "Suspend" as follows:</p>
</li>
</ul>
<p><img alt="goland_ide_set_tacepoints" src="../images/goland_debug_set_tracepoints.gif" /></p>
<ul>
<li>You can also print a <em>breakpoint hit message</em>, print <em>stack trace</em>, 
and <em>Evaluate and Log</em> variables using tracepoints without pausing the program. For example, suppose we want to
print the address of the device simulator in the <a href="https://github.com/onosproject/onos-config/blob/master/pkg/southbound/synchronizer/synchronizer.go">synchronizer</a>
as we add a device simulator to the onit cluster:</li>
</ul>
<p><img alt="goland_log_and_evaluation" src="../images/goland_log_and_evaluate.gif" /></p>
<h2 id="debugging-example-2-use-simple-delve-client">Debugging. Example #2: Use Simple Delve Client:</h2>
<ul>
<li>
<p>In this example, we assume you already started an onit cluster. If you haven't done that yet, refer to <a href="testing.md">testing</a> for more details. </p>
</li>
<li>
<p>First, you need to install <a href="https://github.com/go-delve/delve/tree/master/Documentation/installation">Delve</a> on your machine to interact 
with the debugger in the onos-config pod. To make sure the debugger is installed successfully on your machine, run <code>dlv</code> command which should show its help. </p>
</li>
<li>
<p>To start debugging and  open a debugger port to the given resource, you can run <code>onit debug</code> command. For example, to forwards a port to the debug port on the onos-config pod, run the following command:</p>
</li>
</ul>
<div class="codehilite"><pre><span></span>   &gt;onit debug &lt;name of onos-config pod&gt;
     Forwarding from <span class="m">127</span>.0.0.1:40000 -&gt; <span class="m">40000</span>
     Forwarding from <span class="o">[</span>::1<span class="o">]</span>:40000 -&gt; <span class="m">40000</span>
</pre></div>


<ul>
<li>To connect to the debugger server which is running in the onos-config pod, run the following command from another terminal:</li>
</ul>
<div class="codehilite"><pre><span></span>  &gt; dlv connect localhost:40000
    Type <span class="s1">&#39;help&#39;</span> <span class="k">for</span> list of commands.
    <span class="o">(</span>dlv<span class="o">)</span>
</pre></div>


<ul>
<li>If the dlv client connects to the server without any problems, you should be able to see the following message in the logs:</li>
</ul>
<div class="codehilite"><pre><span></span>     &gt; onit get logs onos-config-5d56898bdd-zrmt2
     ....
     <span class="m">2019</span>-07-18T20:55:06Z debug <span class="nv">layer</span><span class="o">=</span>debugger halting
</pre></div>


<ul>
<li>To get list of sources that can be used for debugging, run the following command from the dlv CLI:</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> sources
    /go/src/github.com/onosproject/onos-config/cmd/onos-config/onos-config.go
    /go/src/github.com/onosproject/onos-config/modelplugin/Devicesim-1.0.0/devicesim_1_0_0/generated.go
    /go/src/github.com/onosproject/onos-config/modelplugin/Devicesim-1.0.0/modelmain.go
    /go/src/github.com/onosproject/onos-config/modelplugin/TestDevice-1.0.0/modelmain.go
    /go/src/github.com/onosproject/onos-config/modelplugin/TestDevice-1.0.0/testdevice_1_0_0/generated.go
    /go/src/github.com/onosproject/onos-config/modelplugin/TestDevice-2.0.0/modelmain.go
    /go/src/github.com/onosproject/onos-config/modelplugin/TestDevice-2.0.0/testdevice_2_0_0/generated.go
    /go/src/github.com/onosproject/onos-config/pkg/dispatcher/dispatcher.go
    /go/src/github.com/onosproject/onos-config/pkg/events/configevent.go
    /go/src/github.com/onosproject/onos-config/pkg/events/events.go
    /go/src/github.com/onosproject/onos-config/pkg/events/operationalevent.go
    /go/src/github.com/onosproject/onos-config/pkg/events/responseevent.go
    /go/src/github.com/onosproject/onos-config/pkg/events/topoevent.go
    /go/src/github.com/onosproject/onos-config/pkg/manager/getconfig.go
    /go/src/github.com/onosproject/onos-config/pkg/manager/manager.go
    /go/src/github.com/onosproject/onos-config/pkg/manager/rollbackconfig.go
    /go/src/github.com/onosproject/onos-config/pkg/manager/setconfig.go
    /go/src/github.com/onosproject/onos-config/pkg/modelregistry/modelregistry.go
    /go/src/github.com/onosproject/onos-config/pkg/northbound/admin/admin.go
    ....
</pre></div>


<ul>
<li>Suppose you want to set a breakpoint at line 83 of <a href="https://github.com/onosproject/onos-config/blob/master/pkg/southbound/synchronizer/synchronizer.go">synchronizer</a>. To do that, run the following command from dlv CLI: </li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> <span class="nb">break</span> onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go:83
</pre></div>


<ul>
<li>if you set it properly, you should be able to see a message like the following in the logs:</li>
</ul>
<div class="codehilite"><pre><span></span>    onit get logs onos-config-5d56898bdd-zrmt2
    ...
    <span class="m">2019</span>-07-18T21:03:24Z info <span class="nv">layer</span><span class="o">=</span>debugger created breakpoint: <span class="p">&amp;</span>api.Breakpoint<span class="o">{</span>ID:2, Name:<span class="s2">&quot;&quot;</span>, Addr:0xcd62a2, File:<span class="s2">&quot;/go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go&quot;</span>, Line:83, FunctionName:<span class="s2">&quot;github.com/onosproject/onos-config/pkg/southbound/synchronizer.New&quot;</span>, Cond:<span class="s2">&quot;&quot;</span>, Tracepoint:false, TraceReturn:false, Goroutine:false, Stacktrace:0, Variables:<span class="o">[]</span>string<span class="o">(</span>nil<span class="o">)</span>, LoadArgs:<span class="o">(</span>*api.LoadConfig<span class="o">)(</span>nil<span class="o">)</span>, LoadLocals:<span class="o">(</span>*api.LoadConfig<span class="o">)(</span>nil<span class="o">)</span>, HitCount:map<span class="o">[</span>string<span class="o">]</span>uint64<span class="o">{}</span>, TotalHitCount:0x0<span class="o">}</span>
</pre></div>


<ul>
<li>Run <code>continue</code> from dlv CLI that runs until breakpoint as follows:
 ```bash
    (dlv) continue</li>
</ul>
<div class="codehilite"><pre><span></span><span class="o">-</span> <span class="k">Then</span>, <span class="nv">add</span> <span class="nv">a</span> <span class="nv">device</span> <span class="nv">simulator</span> <span class="nv">using</span> `<span class="nv">onit</span> <span class="nv">add</span> <span class="nv">simulator</span>` <span class="nv">command</span>. <span class="nv">When</span> <span class="nv">onit</span> <span class="nv">cluster</span> <span class="nv">is</span> <span class="nv">trying</span> <span class="nv">to</span> <span class="nv">add</span> <span class="nv">a</span> <span class="nv">device</span> <span class="nv">simulator</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">cluster</span>, <span class="nv">the</span> <span class="nv">debugger</span> <span class="nv">stops</span> <span class="nv">at</span> <span class="nv">the</span> <span class="nv">breakpoint</span> <span class="nv">and</span> <span class="nv">you</span> <span class="nv">should</span> <span class="nv">be</span> <span class="nv">able</span> <span class="nv">to</span> <span class="nv">see</span> <span class="nv">an</span> <span class="nv">output</span> <span class="nv">like</span> <span class="nv">the</span> <span class="nv">following</span> <span class="nv">from</span> <span class="nv">the</span> <span class="nv">dlv</span> <span class="nv">CLI</span>:
```<span class="nv">bash</span>
    <span class="ss">(</span><span class="nv">dlv</span><span class="ss">)</span> <span class="k">continue</span>
    <span class="o">&gt;</span> <span class="nv">github</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">onosproject</span><span class="o">/</span><span class="nv">onos</span><span class="o">-</span><span class="nv">config</span><span class="o">/</span><span class="nv">pkg</span><span class="o">/</span><span class="nv">southbound</span><span class="o">/</span><span class="nv">synchronizer</span>.<span class="nv">New</span><span class="ss">()</span> <span class="o">/</span><span class="nv">go</span><span class="o">/</span><span class="nv">src</span><span class="o">/</span><span class="nv">github</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">onosproject</span><span class="o">/</span><span class="nv">onos</span><span class="o">-</span><span class="nv">config</span><span class="o">/</span><span class="nv">pkg</span><span class="o">/</span><span class="nv">southbound</span><span class="o">/</span><span class="nv">synchronizer</span><span class="o">/</span><span class="nv">synchronizer</span>.<span class="nv">go</span>:<span class="mi">83</span> <span class="ss">(</span><span class="nv">hits</span> <span class="nv">goroutine</span><span class="ss">(</span><span class="mi">9</span><span class="ss">)</span>:<span class="mi">1</span> <span class="nv">total</span>:<span class="mi">1</span><span class="ss">)</span> <span class="ss">(</span><span class="nv">PC</span>: <span class="mi">0</span><span class="nv">xcd62a2</span><span class="ss">)</span>
</pre></div>


<ul>
<li>In addition, you can check the onos-config logs to make sure the program stops where you expect to stop:
 ```bash
    &gt; onit get logs onos-config-5d56898bdd-zrmt2
    2019-07-18T21:16:32Z debug layer=debugger continuing
    I0718 21:18:09.661372      32 dispatcher.go:103] Registering Device sim1 on channel 0xc000083920 and 0xc000083980
    I0718 21:18:09.662158      32 synchronizer.go:64] Connecting to sim1:10161 over gNMI
    I0718 21:18:09.662369      32 clientManager.go:53] Loading default CA onfca
    I0718 21:18:09.662607      32 clientManager.go:60] Loading default certificates
    I0718 21:18:09.702593      32 synchronizer.go:72] sim1:10161 connected over gNMI</li>
</ul>
<div class="codehilite"><pre><span></span><span class="o">-</span> <span class="nv">Suppose</span> <span class="nv">we</span> <span class="nv">set</span> <span class="nv">another</span> <span class="nv">breakpoint</span> <span class="nv">at</span> <span class="nv">line</span> <span class="mi">89</span> <span class="nv">of</span> [<span class="nv">synchronizer</span>]<span class="ss">(</span><span class="nv">https</span>:<span class="o">//</span><span class="nv">github</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">onosproject</span><span class="o">/</span><span class="nv">onos</span><span class="o">-</span><span class="nv">config</span><span class="o">/</span><span class="nv">blob</span><span class="o">/</span><span class="nv">master</span><span class="o">/</span><span class="nv">pkg</span><span class="o">/</span><span class="nv">southbound</span><span class="o">/</span><span class="nv">synchronizer</span><span class="o">/</span><span class="nv">synchronizer</span>.<span class="nv">go</span><span class="ss">)</span> <span class="nv">and</span> <span class="nv">run</span> `<span class="k">continue</span>` <span class="nv">command</span> <span class="nv">from</span> <span class="nv">dlv</span> <span class="nv">CLI</span> <span class="nv">again</span>. <span class="nv">The</span> <span class="nv">output</span> <span class="nv">of</span> <span class="nv">dlv</span> <span class="nv">CLI</span> <span class="nv">and</span> <span class="nv">onos</span><span class="o">-</span><span class="nv">config</span> <span class="nv">logs</span> <span class="nv">will</span> <span class="nv">be</span> <span class="nv">like</span> <span class="nv">the</span> <span class="nv">followings</span>:

```<span class="nv">bash</span>
    <span class="ss">(</span><span class="nv">dlv</span><span class="ss">)</span> <span class="k">continue</span>
    <span class="o">&gt;</span> <span class="nv">github</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">onosproject</span><span class="o">/</span><span class="nv">onos</span><span class="o">-</span><span class="nv">config</span><span class="o">/</span><span class="nv">pkg</span><span class="o">/</span><span class="nv">southbound</span><span class="o">/</span><span class="nv">synchronizer</span>.<span class="nv">New</span><span class="ss">()</span> <span class="o">/</span><span class="nv">go</span><span class="o">/</span><span class="nv">src</span><span class="o">/</span><span class="nv">github</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">onosproject</span><span class="o">/</span><span class="nv">onos</span><span class="o">-</span><span class="nv">config</span><span class="o">/</span><span class="nv">pkg</span><span class="o">/</span><span class="nv">southbound</span><span class="o">/</span><span class="nv">synchronizer</span><span class="o">/</span><span class="nv">synchronizer</span>.<span class="nv">go</span>:<span class="mi">89</span> <span class="ss">(</span><span class="nv">hits</span> <span class="nv">goroutine</span><span class="ss">(</span><span class="mi">9</span><span class="ss">)</span>:<span class="mi">1</span> <span class="nv">total</span>:<span class="mi">1</span><span class="ss">)</span> <span class="ss">(</span><span class="nv">PC</span>: <span class="mi">0</span><span class="nv">xcd64f9</span><span class="ss">)</span>
</pre></div>


<div class="codehilite"><pre><span></span>    &gt; onit get logs onos-config-5d56898bdd-zrmt2
    ...
    <span class="m">2019</span>-07-18T21:25:21Z info <span class="nv">layer</span><span class="o">=</span>debugger created breakpoint: <span class="p">&amp;</span>api.Breakpoint<span class="o">{</span>ID:3, Name:<span class="s2">&quot;&quot;</span>, Addr:0xcd64f9, File:<span class="s2">&quot;/go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go&quot;</span>, Line:89, FunctionName:<span class="s2">&quot;github.com/onosproject/onos-config/pkg/southbound/synchronizer.New&quot;</span>, Cond:<span class="s2">&quot;&quot;</span>, Tracepoint:false, TraceReturn:false, Goroutine:false, Stacktrace:0, Variables:<span class="o">[]</span>string<span class="o">(</span>nil<span class="o">)</span>, LoadArgs:<span class="o">(</span>*api.LoadConfig<span class="o">)(</span>nil<span class="o">)</span>, LoadLocals:<span class="o">(</span>*api.LoadConfig<span class="o">)(</span>nil<span class="o">)</span>, HitCount:map<span class="o">[</span>string<span class="o">]</span>uint64<span class="o">{}</span>, TotalHitCount:0x0<span class="o">}</span>
    <span class="m">2019</span>-07-18T21:26:51Z debug <span class="nv">layer</span><span class="o">=</span>debugger continuing
    I0718 <span class="m">21</span>:26:51.518797      <span class="m">32</span> synchronizer.go:83<span class="o">]</span> sim1:10161 capabilities supported_models:&lt;name:<span class="s2">&quot;openconfig-interfaces&quot;</span> organization:<span class="s2">&quot;OpenConfig working group&quot;</span> version:<span class="s2">&quot;2017-07-14&quot;</span> &gt; supported_models:&lt;name:<span class="s2">&quot;openconfig-openflow&quot;</span> organization:<span class="s2">&quot;OpenConfig working group&quot;</span> version:<span class="s2">&quot;2017-06-01&quot;</span> &gt; supported_models:&lt;name:<span class="s2">&quot;openconfig-platform&quot;</span> organization:<span class="s2">&quot;OpenConfig working group&quot;</span> version:<span class="s2">&quot;2016-12-22&quot;</span> &gt; supported_models:&lt;name:<span class="s2">&quot;openconfig-system&quot;</span> organization:<span class="s2">&quot;OpenConfig working group&quot;</span> version:<span class="s2">&quot;2017-07-06&quot;</span> &gt; supported_encodings:JSON supported_encodings:JSON_IETF gNMI_version:<span class="s2">&quot;0.7.0&quot;</span>
    I0718 <span class="m">21</span>:26:51.519659      <span class="m">32</span> synchronizer.go:305<span class="o">]</span> Getting saved config <span class="k">for</span> sim1
</pre></div>


<ul>
<li>if you run <code>continue</code> again, it passes the breakpoint at line 89 and onos-config will keep running:</li>
</ul>
<div class="codehilite"><pre><span></span>    &gt; onit get logs onos-config-5d56898bdd-zrmt2
    ...
    <span class="m">2019</span>-07-18T21:45:01Z debug <span class="nv">layer</span><span class="o">=</span>debugger continuing
    I0718 <span class="m">21</span>:45:01.034584      <span class="m">32</span> synchronizer.go:89<span class="o">]</span> sim1:10161 has no initial configuration
    I0718 <span class="m">21</span>:45:01.053357      <span class="m">32</span> synchronizer.go:243<span class="o">]</span> subscribe:&lt;prefix:&lt;&gt; subscription:&lt;path:&lt;&gt; sample_interval:15 heartbeat_interval:15 &gt; subscription:&lt;path:&lt;&gt; sample_interval:15 heartbeat_interval:15 &gt; &gt;
</pre></div>


<ul>
<li>At this point, you have two breakpoints in the <a href="https://github.com/onosproject/onos-config/blob/master/pkg/southbound/synchronizer/synchronizer.go">synchronizer</a>. To see list of your breakpoints, you can run <code>breakpoints</code> command from dlv CLI.</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> breakpoints
    Breakpoint runtime-fatal-throw at 0x6ab830 <span class="k">for</span> runtime.fatalthrow<span class="o">()</span> /usr/local/go/src/runtime/panic.go:663 <span class="o">(</span><span class="m">0</span><span class="o">)</span>
    Breakpoint unrecovered-panic at 0x6ab8a0 <span class="k">for</span> runtime.fatalpanic<span class="o">()</span> /usr/local/go/src/runtime/panic.go:690 <span class="o">(</span><span class="m">0</span><span class="o">)</span>
        print runtime.curg._panic.arg
    Breakpoint <span class="m">4</span> at 0xcd62a2 <span class="k">for</span> github.com/onosproject/onos-config/pkg/southbound/synchronizer.New<span class="o">()</span> /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go:83 <span class="o">(</span><span class="m">1</span><span class="o">)</span>
    Breakpoint <span class="m">5</span> at 0xcd64f9 <span class="k">for</span> github.com/onosproject/onos-config/pkg/southbound/synchronizer.New<span class="o">()</span> /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go:89 <span class="o">(</span><span class="m">0</span><span class="o">)</span>
</pre></div>


<p>You can repeat the above steps by adding another simulator to onos-config and monitor dlv CLI and onos-config pod logs.</p>
<h3 id="print-local-variables">Print Local Variables</h3>
<ul>
<li>When you set breakpoints in a file, you can also print local variables as you go through the breakpoints. For example, look at the following piece of code from <a href="https://github.com/onosproject/onos-config/blob/master/pkg/southbound/synchronizer/synchronizer.go">synchronizer</a>:</li>
</ul>
<div class="codehilite"><pre><span></span>    target :<span class="o">=</span> southbound.Target<span class="o">{}</span>
    key, err :<span class="o">=</span> target.ConnectTarget<span class="o">(</span>context, *sync.Device<span class="o">)</span>
    sync.key <span class="o">=</span> key
</pre></div>


<ul>
<li>Suppose we add a simulator and we would like to print the value of key when it passes this block of code. You can use <code>print</code> function from dlv CLI to print local variables in the code:</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> print key
    github.com/onosproject/onos-config/pkg/southbound.DeviceID <span class="o">{</span>
        DeviceID: <span class="s2">&quot;sim2:10161&quot;</span>,<span class="o">}</span>
</pre></div>


<p>or to print <code>capResponse</code> variable:</p>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> print capResponse
    *github.com/openconfig/gnmi/proto/gnmi.CapabilityResponse <span class="o">{</span>
        SupportedModels: <span class="o">[]</span>*github.com/openconfig/gnmi/proto/gnmi.ModelData len: <span class="m">4</span>, cap: <span class="m">4</span>, <span class="o">[</span>
            *<span class="o">(</span>*<span class="s2">&quot;github.com/openconfig/gnmi/proto/gnmi.ModelData&quot;</span><span class="o">)(</span>0xc00042e280<span class="o">)</span>,
            *<span class="o">(</span>*<span class="s2">&quot;github.com/openconfig/gnmi/proto/gnmi.ModelData&quot;</span><span class="o">)(</span>0xc00042e2d0<span class="o">)</span>,
            *<span class="o">(</span>*<span class="s2">&quot;github.com/openconfig/gnmi/proto/gnmi.ModelData&quot;</span><span class="o">)(</span>0xc00042e320<span class="o">)</span>,
            *<span class="o">(</span>*<span class="s2">&quot;github.com/openconfig/gnmi/proto/gnmi.ModelData&quot;</span><span class="o">)(</span>0xc00042e370<span class="o">)</span>,
        <span class="o">]</span>,
        SupportedEncodings: <span class="o">[]</span>github.com/openconfig/gnmi/proto/gnmi.Encoding len: <span class="m">2</span>, cap: <span class="m">2</span>, <span class="o">[</span>Encoding_JSON <span class="o">(</span><span class="m">0</span><span class="o">)</span>,Encoding_JSON_IETF <span class="o">(</span><span class="m">4</span><span class="o">)]</span>,
        GNMIVersion: <span class="s2">&quot;0.7.0&quot;</span>,
        Extension: <span class="o">[]</span>*github.com/openconfig/gnmi/proto/gnmi_ext.Extension len: <span class="m">0</span>, cap: <span class="m">0</span>, nil,
        XXX_NoUnkeyedLiteral: struct <span class="o">{}</span> <span class="o">{}</span>,
        XXX_unrecognized: <span class="o">[]</span>uint8 len: <span class="m">0</span>, cap: <span class="m">0</span>, nil,
        XXX_sizecache: <span class="m">0</span>,<span class="o">}</span>
</pre></div>


<ul>
<li>You can also check the list of local variables using <code>locals</code> command from dlv CLI, for example:</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> locals
    <span class="nv">sync</span> <span class="o">=</span> <span class="o">(</span><span class="s2">&quot;*github.com/onosproject/onos-config/pkg/southbound/synchronizer.Synchronizer&quot;</span><span class="o">)(</span>0xc000368000<span class="o">)</span>
    <span class="nv">capResponse</span> <span class="o">=</span> <span class="o">(</span><span class="s2">&quot;*github.com/openconfig/gnmi/proto/gnmi.CapabilityResponse&quot;</span><span class="o">)(</span>0xc000346d80<span class="o">)</span>
    <span class="nv">target</span> <span class="o">=</span> github.com/onosproject/onos-config/pkg/southbound.Target <span class="o">{</span>Destination: <span class="o">(</span>*<span class="s2">&quot;github.com/openconfig/gnmi/client.Destination&quot;</span><span class="o">)(</span>0xc0004e00e0<span class="o">)</span>, Clt: github.com/onosproject/onos-config/pkg/southbound.GnmiClient<span class="o">(</span>github.com/onosproject/onos-config/pkg/southbound.gnmiClientImpl<span class="o">)</span> *<span class="o">(</span>*<span class="s2">&quot;github.com/onosproject/onos-config/pkg/southbound.GnmiClient&quot;</span><span class="o">)(</span>0xc0004e0130<span class="o">)</span>, Ctx: context.Context<span class="o">(</span>*context.emptyCtx<span class="o">)</span> ...<span class="o">}</span>
    <span class="nv">key</span> <span class="o">=</span> github.com/onosproject/onos-config/pkg/southbound.DeviceID <span class="o">{</span>DeviceID: <span class="s2">&quot;sim1:10161&quot;</span><span class="o">}</span>
    <span class="nv">err</span> <span class="o">=</span> error nil
    <span class="nv">capErr</span> <span class="o">=</span> error nil
</pre></div>


<h3 id="goroutines">Goroutines</h3>
<ul>
<li>To check which goroutine is running when you are going through a piece of code using breakpoints, you can run the following command from dlv CLI:</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> goroutine
    Goroutine <span class="m">12</span>:
        Runtime: /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go:83 github.com/onosproject/onos-config/pkg/southbound/synchronizer.New <span class="o">(</span>0xcd62a2<span class="o">)</span>
        User: /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go:83 github.com/onosproject/onos-config/pkg/southbound/synchronizer.New <span class="o">(</span>0xcd62a2<span class="o">)</span>
        Go: /go/src/github.com/onosproject/onos-config/pkg/manager/manager.go:217 github.com/onosproject/onos-config/pkg/manager.<span class="o">(</span>*Manager<span class="o">)</span>.Run <span class="o">(</span>0xcdfb0c<span class="o">)</span>
        Start: /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/factory.go:30 github.com/onosproject/onos-config/pkg/southbound/synchronizer.Factory <span class="o">(</span>0xcd4aa0<span class="o">)</span>
</pre></div>


<ul>
<li>To check list of all goroutines which potentially can be running in onos-config, you can run the following command from dlv CLI:</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> goroutines
      Goroutine <span class="m">1</span> - User: /usr/local/go/src/runtime/netpoll.go:182 internal/poll.runtime_pollWait <span class="o">(</span>0x6a7b5e<span class="o">)</span>
      Goroutine <span class="m">2</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">3</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">4</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">5</span> - User: /go/src/github.com/onosproject/onos-config/vendor/k8s.io/klog/klog.go:990 k8s.io/klog.<span class="o">(</span>*loggingT<span class="o">)</span>.flushDaemon <span class="o">(</span>0x8227a3<span class="o">)</span>
      Goroutine <span class="m">6</span> - User: /go/src/github.com/onosproject/onos-config/vendor/github.com/golang/glog/glog.go:882 github.com/golang/glog.<span class="o">(</span>*loggingT<span class="o">)</span>.flushDaemon <span class="o">(</span>0xca8b23<span class="o">)</span>
      Goroutine <span class="m">7</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">8</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">9</span> - User: /go/src/github.com/onosproject/onos-config/pkg/dispatcher/dispatcher.go:58 github.com/onosproject/onos-config/pkg/dispatcher.<span class="o">(</span>*Dispatcher<span class="o">)</span>.Listen <span class="o">(</span>0x82a193<span class="o">)</span>
      Goroutine <span class="m">10</span> - User: /go/src/github.com/onosproject/onos-config/pkg/dispatcher/dispatcher.go:86 github.com/onosproject/onos-config/pkg/dispatcher.<span class="o">(</span>*Dispatcher<span class="o">)</span>.ListenOperationalState <span class="o">(</span>0x82a96b<span class="o">)</span>
      Goroutine <span class="m">11</span> - User: /go/src/github.com/onosproject/onos-config/pkg/manager/manager.go:236 github.com/onosproject/onos-config/pkg/manager.listenOnResponseChannel <span class="o">(</span>0xcdfd20<span class="o">)</span>
      Goroutine <span class="m">12</span> - User: /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go:83 github.com/onosproject/onos-config/pkg/southbound/synchronizer.New <span class="o">(</span>0xcd62a2<span class="o">)</span> <span class="o">(</span>thread <span class="m">60</span><span class="o">)</span>
      Goroutine <span class="m">18</span> - User: /usr/local/go/src/runtime/lock_futex.go:228 runtime.notetsleepg <span class="o">(</span>0x685a74<span class="o">)</span>
      Goroutine <span class="m">19</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">20</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">34</span> - User: /usr/local/go/src/runtime/lock_futex.go:228 runtime.notetsleepg <span class="o">(</span>0x685a74<span class="o">)</span>
      Goroutine <span class="m">35</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">83</span> - User: /usr/local/go/src/runtime/proc.go:302 runtime.gopark <span class="o">(</span>0x6ae2c4<span class="o">)</span>
      Goroutine <span class="m">101</span> - User: /usr/local/go/src/runtime/netpoll.go:182 internal/poll.runtime_pollWait <span class="o">(</span>0x6a7b5e<span class="o">)</span>
      Goroutine <span class="m">102</span> - User: /go/src/github.com/onosproject/onos-config/vendor/google.golang.org/grpc/internal/transport/controlbuf.go:317 google.golang.org/grpc/internal/transport.<span class="o">(</span>*controlBuffer<span class="o">)</span>.get <span class="o">(</span>0xb54ae3<span class="o">)</span>
      Goroutine <span class="m">103</span> - User: /go/src/github.com/onosproject/onos-config/vendor/google.golang.org/grpc/stream.go:320 google.golang.org/grpc.newClientStream.func5 <span class="o">(</span>0xc3492d<span class="o">)</span>
      Goroutine <span class="m">104</span> - User: /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go:130 github.com/onosproject/onos-config/pkg/southbound/synchronizer.<span class="o">(</span>*Synchronizer<span class="o">)</span>.syncConfigEventsToDevice <span class="o">(</span>0xcd72a5<span class="o">)</span>
      Goroutine <span class="m">105</span> - User: /go/src/github.com/onosproject/onos-config/vendor/google.golang.org/grpc/internal/transport/transport.go:267 google.golang.org/grpc/internal/transport.<span class="o">(</span>*Stream<span class="o">)</span>.waitOnHeader <span class="o">(</span>0xb7e542<span class="o">)</span>
    .....
    <span class="o">[</span><span class="m">49</span> goroutines<span class="o">]</span>
</pre></div>


<h3 id="debug-your-code-line-by-line">Debug Your Code Line by Line</h3>
<ul>
<li>After setting a breakpoint in a source file, you can execute your code line by line  using <code>next</code> or <code>n</code> command from dlv CLI: For example:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="w">    </span><span class="p">(</span><span class="n">dlv</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="w">    </span><span class="o">&gt;</span><span class="w"> </span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">onosproject</span><span class="o">/</span><span class="n">onos</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">pkg</span><span class="o">/</span><span class="n">southbound</span><span class="o">/</span><span class="n">synchronizer</span><span class="p">.</span><span class="k">New</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="k">go</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">onosproject</span><span class="o">/</span><span class="n">onos</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">pkg</span><span class="o">/</span><span class="n">southbound</span><span class="o">/</span><span class="n">synchronizer</span><span class="o">/</span><span class="n">synchronizer</span><span class="p">.</span><span class="k">go</span><span class="err">:</span><span class="mi">88</span><span class="w"> </span><span class="p">(</span><span class="nl">PC</span><span class="p">:</span><span class="w"> </span><span class="mh">0xcd64e9</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">dlv</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="w">    </span><span class="o">&gt;</span><span class="w"> </span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">onosproject</span><span class="o">/</span><span class="n">onos</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">pkg</span><span class="o">/</span><span class="n">southbound</span><span class="o">/</span><span class="n">synchronizer</span><span class="p">.</span><span class="k">New</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="k">go</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">onosproject</span><span class="o">/</span><span class="n">onos</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">pkg</span><span class="o">/</span><span class="n">southbound</span><span class="o">/</span><span class="n">synchronizer</span><span class="o">/</span><span class="n">synchronizer</span><span class="p">.</span><span class="k">go</span><span class="err">:</span><span class="mi">89</span><span class="w"> </span><span class="p">(</span><span class="nl">PC</span><span class="p">:</span><span class="w"> </span><span class="mh">0xcd64f9</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">dlv</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="w">    </span><span class="o">&gt;</span><span class="w"> </span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">onosproject</span><span class="o">/</span><span class="n">onos</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">pkg</span><span class="o">/</span><span class="n">southbound</span><span class="o">/</span><span class="n">synchronizer</span><span class="p">.</span><span class="k">New</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="k">go</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">onosproject</span><span class="o">/</span><span class="n">onos</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">pkg</span><span class="o">/</span><span class="n">southbound</span><span class="o">/</span><span class="n">synchronizer</span><span class="o">/</span><span class="n">synchronizer</span><span class="p">.</span><span class="k">go</span><span class="err">:</span><span class="mi">123</span><span class="w"> </span><span class="p">(</span><span class="nl">PC</span><span class="p">:</span><span class="w"> </span><span class="mh">0xcd65ec</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">dlv</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
</pre></div>


<h3 id="print-stack-trace">Print Stack Trace</h3>
<ul>
<li>To print stack trace, you can run <code>stack</code> command as  follows:</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="o">(</span>dlv<span class="o">)</span> stack
    <span class="m">0</span>  0x0000000000cd62a2 in github.com/onosproject/onos-config/pkg/southbound/synchronizer.New
       at /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/synchronizer.go:83
    <span class="m">1</span>  0x0000000000cd518e in github.com/onosproject/onos-config/pkg/southbound/synchronizer.Factory
       at /go/src/github.com/onosproject/onos-config/pkg/southbound/synchronizer/factory.go:49
    <span class="m">2</span>  0x00000000006dae71 in runtime.goexit
       at /usr/local/go/src/runtime/asm_amd64.s:1337
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      



<!-- Application footer -->
<footer class="md-footer">

    <!-- Further information -->
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">

            <!-- Copyright and theme information -->
            <div class="md-footer-copyright">
                
                powered by
                <a href="https://www.mkdocs.org" title="MkDocs">MkDocs</a>
                and
                <a href="https://squidfunk.github.io/mkdocs-material/"
                   title="Material for MkDocs">
                    Material for MkDocs</a>
            </div>

            <!-- Social links -->
            
            
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/onosproject" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://onosproject.slack.com/" class="md-footer-social__link fa fa-slack"></a>
    
      <a href="https://www.youtube.com/channel/UCTQaOpqno48GTimdwyfytFw" class="md-footer-social__link fa fa-youtube"></a>
    
  </div>

            
        </div>
    </div>
</footer>


    </div>
    
      <script src="../../../assets/javascripts/application.d9aa80ab.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../theme/js/onos-menu.js"></script>
      
    
  </body>
</html>